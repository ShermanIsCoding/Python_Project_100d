===持久化===

Redis支持RDB和AOF两种持久化机制，持久化功能有效的避免因进程退出造成的数据丢失问题

当下次重启时利用持久化的文件即可实现数据恢复。

===RDB===

RDB持久化是把当前进程数据生成快照保存到硬盘的过程，触发RDB持久化过程分为手动触发和

自动触发。也就是说RDB持久化方式是在一个特定的间隔保存那个时间点的一个数据快照。

```
# 总的来说，有两种方式save和bgsave
1. save
说明：save命令：阻塞当前Redis服务器，直到RDB过程完成为止，对于内存比较大的实例会造成长
时间阻塞，线上环境不建议使用。
2. bgsave
说明：Redis进程执行fork操作创建子进程，RDB持久化过程由子进程负责，完成后自动结束。阻塞
只发生在fork阶段，一般时间很短。
```

优点：

RDB是一个紧凑压缩的二进制文件，代表Redis在某个时间点上的数据快照。非常适用于备份

全量复制等场景。Redis加载RDB恢复数据远远快于AOF的方式。

缺点：

RDB方式数据没办法做到实时持久化/秒级持久化。因为bgsave每次运行都要fork操作创建子

进程，属于重量级操作，频繁执行成本过高。



===AOF===

AOF（append only file）持久化：以独立日志的方式记录每次写命令，重启时再重新执行AOF

文件中的命令达到恢复数据的目的。

看帖子吧，看书看得头蒙：

<https://segmentfault.com/a/1190000002906345>